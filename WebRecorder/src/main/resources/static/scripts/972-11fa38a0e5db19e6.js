(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{6714:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var n=t(1527),r=t(959),i=t(5341),s=t(5484),c=t(4739),o=t(452),d=t.n(o);function l(e){let{uid:a,size:t=120,guard:o=0,avatar:l,frame:m,frameRank:p=1,live:u=!1,className:g}=e,[_,f]=(0,r.useState)(!1),[v,x]=(0,r.useState)(!1),h=(0,s.D)(),{showAvatarFrame:y,customAvatarApi:k}=h,j=k||"".concat(c.V.Workers,"/api/bilibili/avatar/"),b=l||"".concat(j).concat(a,"?size=").concat(2*t);return(0,n.jsxs)("div",{className:(0,i.Z)(d().wrap,"avatar-wrap",d()["guardLevel".concat(o)],d()["frameRank".concat(p)],"guard-level--".concat(o),"avatar-frame-rank--".concat(p),u&&"".concat(d().isLive," is-live"),g),"data-uid":a,"data-frame-rank":p,children:[!1!==y&&(m?(0,n.jsx)("picture",{className:"".concat(d().avatarFrameWrap," avatar-frame-wrap"),children:(0,n.jsx)("img",{src:v?"/transparent.png":m,alt:"头像框",referrerPolicy:"no-referrer",className:(0,i.Z)(d().avatarFrame,"avatar-frame",v&&"avatar-frame-fallback"),onError:()=>x(!0),loading:"lazy"})}):(0,n.jsx)("div",{className:"".concat(d().avatarFrame," avatar-frame")})),(0,n.jsx)("picture",{children:(0,n.jsx)("img",{src:_?"/no-avatar.jpg":b,alt:"头像",referrerPolicy:"no-referrer",className:(0,i.Z)(d().avatar,"avatar",_&&"avatar-fallback"),onError:()=>f(!0),loading:"lazy"})})]})}},7083:function(e,a,t){"use strict";t.d(a,{Z:function(){return eg}});var n=t(1527),r=t(959),i=t(5341),s=t(939),c=t.n(s);function o(e){let{data:a,...t}=e;return(0,n.jsx)("div",{className:(0,i.Z)(c().event,"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx)),"data-uid":a.uid,"data-timestamp":a.timestamp,...t,children:a.message})}var d=t(3722),l=t(4738);function m(e){return e.toString(16).padStart(6,"0")}var p=t(5484),u=t(2970);let g={1:{action:"enter",name:"进入"},2:{action:"follow",name:"关注"},3:{action:"share",name:"分享"},4:{action:"follow-special",name:"特别关注"},5:{action:"follow-mutual",name:"互相关注"}},_={0:{type:"user",name:"用户"},1:{type:"mod",name:"房管"},100:{type:"streamer",name:"主播"}};var f=t(6714),v=t(1902),x=t.n(v);function h(e){let{data:a}=e,t=(0,p.D)(),{showMedalLightenedOnly:r}=t;if(a&&""===a.name)return(0,n.jsx)(n.Fragment,{});{let e=!r||a.lightened,t=Math.ceil(a.level/4);return e?(0,n.jsxs)("div",{className:(0,i.Z)(x().fansMedal,"fans-medal","fans-medal-lvl--".concat(a.level),"fans-medal-tier--".concat(t),"fans-medal-name--".concat(a.name),"fans-medal-lightened--".concat((null==a?void 0:a.lightened)!==void 0?a.lightened:"unknown"),(null==a?void 0:a.guardType)&&a.guardType>0&&[x().fansMedalHasGuard,x()["fansMedalHasGuard".concat(a.guardType)],"fans-medal-has-guard","fans-medal-has-guard--".concat(a.guardType)]),style:{borderColor:"#".concat(m(a.colorBorder))},children:[(0,n.jsxs)("div",{className:"".concat(x().fansMedalContent," fans-medal-content"),style:{backgroundImage:"linear-gradient(45deg, #".concat(m(a.colorStart),", #").concat(m(a.colorEnd),")")},children:[(null==a?void 0:a.guardType)&&a.guardType>0?(0,n.jsx)("div",{className:(0,i.Z)(x().guardBadge,x()["guardBadge".concat(a.guardType)],"guard-badge","guard-badge--".concat(a.guardType))}):"",a.name]}),(0,n.jsx)("div",{className:"".concat(x().fansMedalLevel," fans-medal-level"),style:{color:"#".concat(m(a.colorStart))},children:a.level})]}):(0,n.jsx)(n.Fragment,{})}}var y=t(4739),k=t(8594),j=t.n(k);function b(e){let{data:a}=e,[t,s]=(0,r.useState)(!1),c=(0,p.D)(),{showWealthMedal:o}=c,d="".concat(y.V.Workers,"/api/bilibili/wealth-config?level=").concat(a);return a&&o?(0,n.jsxs)("div",{className:(0,i.W)(j().wealthMedal,"wealth-medal","wealth-medal-lvl--".concat(a),t&&[j().wealthMedalImageFailed,"wealth-medal-image-failed"]),"data-medal-lvl":a,children:[(0,n.jsx)("picture",{children:(0,n.jsx)("img",{className:(0,i.W)(t&&"wealth-medal-image-fallback"),src:t?"/transparent.png":d,alt:"荣耀勋章",referrerPolicy:"no-referrer",onError:()=>s(!0),loading:"lazy"})}),t&&a]}):(0,n.jsx)(n.Fragment,{})}var N=t(9454),w=t.n(N);function R(e){let{text:a,bmotes:t}=e,r=/(\[[^\]]+\])|([^\[\]]+)/g;return(0,n.jsx)(n.Fragment,{children:(e=>{let a=e.match(r);if(!a)return[];{let e=a.map((e,a)=>t.hasOwnProperty(e)?(0,n.jsx)("picture",{className:(0,i.Z)(w().bmoteWrap,"bmote-wrap"),children:(0,n.jsx)("img",{className:(0,i.Z)(w().bmote,"bmote"),src:t[e].url,alt:e,referrerPolicy:"no-referrer",loading:"lazy"})},a):e);return e}})(a)})}var I=t(6157),T=t(7777),L=t(8175),Z=t(3626),z=t(6310);function C(e){let{event:a,children:t}=e,{updateSearchQuery:r}=(0,u.Z)();return(0,n.jsxs)(I.v,{shadow:"md",withArrow:!0,withinPortal:!0,children:[(0,n.jsx)(I.v.Target,{children:t}),(0,n.jsxs)(I.v.Dropdown,{children:[(0,n.jsx)(I.v.Label,{children:(0,n.jsxs)(T.Z,{spacing:"xs",children:[(0,n.jsx)(f.Z,{uid:a.uid}),(0,n.jsxs)("div",{children:["username"in a?(0,n.jsx)(L.x,{children:a.username}):(0,n.jsx)(L.x,{children:"内置功能"}),(0,z.Z)(new Date(a.timestampNormalized),{format:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}}),(0,n.jsx)(L.x,{component:"span",opacity:.5,children:"@"}),(0,Z.Z)(a.timestampNormalized)]})]})}),(0,n.jsx)(I.v.Item,{onClick:()=>r("uid:".concat(a.uid)),children:"筛选该用户"}),(0,n.jsx)(I.v.Divider,{}),(0,n.jsx)(I.v.Label,{children:"外部功能"}),(0,n.jsx)(I.v.Item,{component:"a",href:"https://space.bilibili.com/".concat(a.uid),target:"_blank",children:"访问哔哩哔哩空间"}),(0,n.jsx)(I.v.Item,{component:"a",href:"https://laplace.live/user/".concat(a.uid),target:"_blank",children:"查成分"})]})]})}var S=t(7953),F=t.n(S);function D(e){let{data:a,mode:t,...s}=e,{remoteEmotes:c}=(0,u.Z)(),o=(0,p.D)(),{colorScheme:g,showUsername:v,showAvatar:y,showMedal:k,showUserLvl:j,showCurrentRank:N,showModBadge:w,baseFontSize:I,showWealthMedal:T,altDanmakuLayout:L}=o,Z=c&&Object.keys(c).length>0?{...a.bmotes,...c}:a.bmotes,z=Object.keys(Z||{}).length>0,S=!0===L,D=S?"div":r.Fragment;return(0,n.jsxs)("div",{className:(0,i.Z)(F().event,F()["guardLevel".concat(a.guardType)],"dark"===g&&[F().dark,"dark"],"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx),"guard-level--".concat(a.guardType),"current-rank--".concat(a.currentRank||0),"user-type--".concat(a.userType),"user-type--".concat(_[a.userType].type),a.read&&[F().read,"read"],(null==a?void 0:a.bmotes)&&"has-bmotes",(null==a?void 0:a.emote)&&"has-emotes"),"data-uid":a.uid,"data-timestamp":a.timestamp,"data-read":a.read,...s,children:[S&&(0,n.jsx)(f.Z,{avatar:a.avatar,uid:a.uid,guard:a.guardType}),(0,n.jsxs)(D,{...S?{className:"content-wrap alt-layout"}:{},children:[(0,n.jsxs)("div",{className:(0,i.Z)(F().meta,"meta"),children:[!S&&y&&(0,n.jsx)(f.Z,{avatar:a.avatar,uid:a.uid,guard:a.guardType}),T&&!!(null==a?void 0:a.wealthMedalLevel)&&(0,n.jsx)(b,{data:a.wealthMedalLevel}),(k||"dashboard"===t)&&(0,n.jsx)(h,{data:a.medal}),j&&a.userLvl?(0,n.jsx)("div",{className:(0,i.Z)(F().userLevel,"user-level","user-level--".concat(a.userLvl)),style:{borderColor:"#".concat(m(a.userLvlBorder))},children:(0,n.jsxs)("div",{className:(0,i.Z)(F().fansMedalTexst,"user-level-text"),style:{color:"#".concat(m(a.userLvlBorder))},children:[(0,n.jsx)("span",{className:"user-level-name",children:"UL"}),(0,n.jsx)("span",{className:"user-level-figure",children:a.userLvl})]})}):"",(v||"dashboard"===t)&&(0,n.jsxs)("span",{className:(0,i.Z)(F().username,"username"),children:["obs"===t&&(0,n.jsx)(n.Fragment,{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]}),100===a.userType&&(0,n.jsx)(d.Z,{className:(0,i.Z)(F().streamerBadge,"streamer-badge")}),(w||"dashboard"===t)&&1===a.userType&&(0,n.jsx)(l.Z,{className:(0,i.Z)(F().modBadge,"mod-badge")}),a.guardType>0&&(0,n.jsx)("span",{className:(0,i.Z)(x().guardBadge,x()["guardBadge".concat(a.guardType)],"guard-badge","guard-badge--".concat(a.guardType))}),N&&a.currentRank&&a.currentRank>0?(0,n.jsxs)("span",{className:(0,i.Z)(F().currentRank,F()["currentRank".concat(a.currentRank)],"current-rank","current-rank--".concat(a.currentRank)),children:["榜",a.currentRank]}):""]}),(0,n.jsxs)("span",{className:(0,i.Z)(F().message,"message"),children:[(null==a?void 0:a.emote)&&(0,n.jsx)("picture",{className:(0,i.Z)(F().emoteWrap,"emote-wrap"),children:(0,n.jsx)("img",{className:(0,i.Z)(F().emote,"emote"),src:"".concat(a.emote),alt:a.emote,referrerPolicy:"no-referrer",loading:"lazy"})}),!(null==a?void 0:a.emote)&&!z&&a.message,!(null==a?void 0:a.emote)&&z&&(0,n.jsx)(R,{text:a.message,bmotes:Z})]})]})]})}var A=t(3298),E=t.n(A);function W(e){let{data:a,mode:t,...r}=e,s=g[a.action],c=(0,p.D)(),{showMedal:o}=c;return(0,n.jsxs)("div",{className:(0,i.Z)(E().event,E()["guardLevel".concat(a.guardType)],E()["action_".concat(s.action)],"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx),"guard-level--".concat(a.guardType),"event-action--".concat(s.action)),"data-uid":a.uid,"data-timestamp":a.timestamp,...r,children:[(0,n.jsxs)("div",{className:"".concat(E().meta," meta"),children:[(0,n.jsx)(f.Z,{uid:a.uid}),(o||"dashboard"===t)&&(0,n.jsx)(h,{data:a.medal}),(0,n.jsxs)("span",{className:"".concat(E().username," username"),children:["obs"===t&&(0,n.jsx)(n.Fragment,{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]})]}),(0,n.jsx)("span",{className:"".concat(E().message," message"),children:"".concat(s.name,"直播间")})]})}var B=t(996),M=t(930),P=t.n(M);function H(e){let{data:a,mode:t,as:r,...s}=e,c=(0,p.D)(),{colorScheme:o}=c,d="1",l="1";if(a.toastTotalCount){let e=a.toastTotalCount;e>=1e3&&e<1e4?d="2":e>=1e4&&(d="3"),e>=1e3&&(l="2")}return(0,n.jsxs)("div",{className:(0,i.Z)(P().event,P()["tier".concat(a.toastType)],P()["frameRank".concat(d)],P()["badgeRank".concat(l)],P()["showAs_".concat(r)],"dark"===o&&[P().dark,"dark"],"event","event-type--".concat(a.type),"event-show-as--".concat(r),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx),"guard-level--".concat(a.toastType),"avatar-frame-rank--".concat(d),"avatar-badge-rank--".concat(l),a.read&&[P().read,"read"]),"data-uid":a.uid,"data-timestamp":a.timestampNormalized,"data-toast-price":a.priceNormalized,"data-toast-type":a.toastType,"data-toast-amount":a.toastAmount,"data-frame-rank":d,"data-badge-rank":l,"data-read":a.read,...s,children:[(0,n.jsx)(f.Z,{uid:a.uid,guard:a.toastType,frameRank:Number(d)}),(0,n.jsxs)("div",{className:"".concat(P().content," content"),children:["sticky"!==r&&(0,n.jsxs)("div",{className:"".concat(P().username," username"),children:["obs"===t&&(0,n.jsx)(n.Fragment,{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]}),(0,n.jsxs)("div",{className:"".concat(P().price," price"),children:[(0,n.jsx)("span",{className:"".concat(P().priceCurrency," price-currency"),children:"CN\xa5"}),(0,n.jsx)("span",{className:"".concat(P().priceFigure," price-figure"),children:B.Z.format(a.priceNormalized)})]}),"sticky"!==r&&(0,n.jsx)("div",{className:"".concat(P().message," message"),children:a.message.replace(/<%.*?%>\s/g,"").replace("今天是TA陪伴主播的第","已陪伴主播")})]})]})}var O=t(6986),V=t.n(O);function G(e){let{data:a,mode:t,as:s,...c}=e,[o,d]=(0,r.useState)(!1),l=(0,p.D)(),{colorScheme:m,showMedal:u,showGiftHighlightAbove:g,baseFontSize:_}=l,v=a.priceNormalized,x=4*_,k=v>g,j="gold"===a.coinType,b="".concat(y.V.Workers,"/api/bilibili/room-gift-config/").concat(a.origin,"?gift=").concat(a.giftId,"&size=").concat(k?2*x:x),N=j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"".concat(V().priceCurrency," price-currency"),children:"CN\xa5"}),(0,n.jsx)("span",{className:"".concat(V().priceFigure," price-figure"),children:B.Z.format(v)})]}):"".concat(B.Z.format(v)," 银瓜子"),w="1";return v&&(v>=30&&v<50?w="1":v>=50&&v<100?w="2":v>=100&&v<500?w="3":v>=500&&v<1e3?w="4":v>=1e3&&v<2e3?w="5":v>=2e3&&(w="6")),(0,n.jsx)("div",{className:(0,i.Z)(V().event,V()["guardLevel".concat(a.guardType)],k&&j||"sticky"===s?V().eventSizeHighlight:V().eventSizeNormal,V()["giftRank".concat(w)],V()["showAs_".concat(s)],"dark"===m&&[V().dark,"dark"],"event","event-size--".concat(k&&j||"sticky"===s?"highlight":"normal"),"event-type--".concat(a.type),"event-show-as--".concat(s),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx),"guard-level--".concat(a.guardType),"event-gift-id--".concat(a.giftId),"event-gift-type--".concat(a.giftType),"event-gift-rank--".concat(w),"event-price-rank--".concat(w),a.read&&[V().read,"read"]),"data-uid":a.uid,"data-timestamp":a.timestampNormalized,"data-gift-price":a.priceNormalized,"data-gift-id":a.giftId,"data-gift-type":a.giftType,"data-gift-amount":a.giftAmount,"data-gift-rank":w,"data-read":a.read,...c,children:(0,n.jsxs)("div",{className:"".concat(V().content," content"),children:[(0,n.jsxs)("div",{className:"".concat(V().top," top"),children:[(0,n.jsx)(f.Z,{uid:a.uid,avatar:"".concat(a.avatar,"@").concat(x,"w_").concat(x,"h"),guard:a.guardType}),"sticky"!==s&&(0,n.jsxs)(n.Fragment,{children:[(u||"dashboard"===t)&&(0,n.jsx)(h,{data:a.medal}),(0,n.jsxs)("div",{className:"".concat(V().username," username"),children:["obs"===t&&(0,n.jsx)("div",{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]})]}),(0,n.jsx)("div",{className:"".concat(V().price," price"),children:N}),(0,n.jsx)("span",{className:"".concat(V().giftImageWrap," gift-image-wrap"),children:(0,n.jsx)("picture",{children:(0,n.jsx)("img",{className:(0,i.Z)(o&&"gift-image-fallback"),src:o?"/gift-fallback.png":b,alt:"礼物",referrerPolicy:"no-referrer",onError:()=>d(!0),loading:"lazy"})})})]}),(0,n.jsx)("div",{className:"".concat(V().priceAlt," price-alt"),children:N}),"sticky"!==s&&(0,n.jsxs)("div",{className:"".concat(V().message," message"),children:[(0,n.jsx)("b",{children:a.message}),(0,n.jsxs)("span",{className:"gift-details",children:[a.giftAmount>1?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"".concat(V().giftDetailsSymbol," gift-details-symbol"),children:"\xd7"}),(0,n.jsx)("span",{className:"".concat(V().giftDetailsFigure," gift-details-figure"),children:B.Z.format(a.giftAmount)})]}):""," ",(0,n.jsx)("span",{className:"".concat(V().giftDetailsPrice," gift-details-price"),children:N})]}),a.receiver&&"voice_chat_room"===a.bizSource&&(0,n.jsxs)("span",{className:"gift-receiver",children:[" ","送给 ",(0,n.jsx)("b",{children:a.receiver.uname})]})]})]})})}var U=t(837),q=t(168),J=t(4290),Q=t.n(J);function K(e){let{data:a,mode:t,as:r,...s}=e,c=(0,p.D)(),{colorScheme:o,showMedal:d,baseFontSize:l}=c,m=a.price,u=4*l,g=(null==a?void 0:a.transMark)===1&&(null==a?void 0:a.messageTrans),_="1";return m&&(m>=30&&m<50?_="1":m>=50&&m<100?_="2":m>=100&&m<500?_="3":m>=500&&m<1e3?_="4":m>=1e3&&m<2e3?_="5":m>=2e3&&(_="6")),(0,n.jsx)("div",{className:(0,i.Z)(Q().event,Q()["superChatRank".concat(_)],Q()["showAs_".concat(r)],"dark"===o&&[Q().dark,"dark"],"event","event-type--".concat(a.type),"event-show-as--".concat(r),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx),"event-superchat-id--".concat(a.scId),"event-superchat-rank--".concat(_),"event-price-rank--".concat(_),a.read&&[Q().read,"read"],a.deleted&&[Q().deleted,"deleted"],g&&"has-translation"),"data-uid":a.uid,"data-timestamp":a.timestampNormalized,"data-superchat-price":a.priceNormalized,"data-superchat-id":a.scId,"data-superchat-amount":a.scAmount,"data-superchat-rank":_,"data-read":a.read,...s,children:(0,n.jsxs)("div",{className:"".concat(Q().content," content"),children:[(0,n.jsxs)("div",{className:"".concat(Q().top," top"),children:[(0,n.jsx)(f.Z,{uid:a.uid,avatar:"".concat(a.avatar,"@").concat(u,"w_").concat(u,"h"),guard:a.guardType}),(0,n.jsxs)("div",{className:"".concat(Q().meta," meta"),children:["sticky"!==r&&(0,n.jsxs)("div",{className:"".concat(Q().usernameWrap," username-wrap"),children:[(d||"dashboard"===t)&&(0,n.jsx)(h,{data:a.medal}),(0,n.jsxs)("div",{className:"".concat(Q().username," username"),children:["obs"===t&&(0,n.jsx)("div",{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]})]}),(0,n.jsxs)("div",{className:"".concat(Q().price," price"),children:[(0,n.jsxs)("div",{style:{flex:"auto"},children:[(0,n.jsx)("span",{className:"".concat(Q().priceCurrency," price-currency"),children:"CN\xa5"}),(0,n.jsx)("span",{className:"".concat(Q().priceFigure," price-figure"),children:B.Z.format(a.priceNormalized)})]}),"dashboard"===t&&(0,n.jsxs)("div",{className:"".concat(Q().timestampWrap," timestamp-wrap"),children:[a.deleted&&(0,n.jsx)(U.u,{label:"已被系统或房管删除",withArrow:!0,withinPortal:!0,children:(0,n.jsx)(q.Z,{className:Q().deletedBadge})}),(0,n.jsx)(U.u,{label:(0,z.Z)(new Date(a.timestampNormalized),{format:{month:"2-digit",day:"2-digit",weekday:"short",hour:"2-digit",minute:"2-digit",second:"2-digit"}}),withArrow:!0,withinPortal:!0,children:(0,n.jsxs)("div",{className:"".concat(Q().timestamp," timestamp"),children:[" ",(0,Z.Z)(a.timestampNormalized)]})})]})]})]})]}),"sticky"!==r&&(0,n.jsxs)("div",{className:"".concat(Q().message," message"),children:["obs"===t&&(0,n.jsx)("div",{className:"message-text",children:a.message}),"dashboard"===t&&(0,n.jsx)("div",{className:"message-text",dangerouslySetInnerHTML:{__html:a.message.replace(/(BV|bv)([a-zA-Z0-9]{10})/g,(e,a,t)=>{let n="https://www.bilibili.com/video/".concat(a).concat(t);return'<a href="'.concat(n,'" target="_blank" rel="noopener noreferrer">').concat(e,"</a>")})}}),g&&(0,n.jsxs)("div",{className:"message-translation",children:["\uD83C\uDF10 ",a.messageTrans]})]})]})})}var Y=t(7886),X=t.n(Y);function $(e){let{data:a,mode:t,...r}=e;return(0,n.jsxs)("div",{className:(0,i.Z)(X().event,"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx)),"data-uid":a.uid,"data-timestamp":a.timestamp,...r,children:["obs"===t&&(0,n.jsx)("span",{className:"username",children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("span",{className:"username",style:{cursor:"pointer"},children:a.username})}),(0,n.jsxs)("span",{className:"message",children:["被",1===a.operator?"房管":"主播","禁言！"]})]})}var ee=t(7297),ea=t(4812),et=t.n(ea);function en(e){let{data:a,mode:t,...s}=e;return(0,r.useEffect)(()=>{"dashboard"===t&&ee.N9.show({id:"live-warning-".concat(a.uid),title:"".concat((0,Z.Z)(a.timestampNormalized),"：直播间 ").concat(a.uid," 被警告！"),message:"".concat(a.message),color:"orange"})},[t,a]),(0,n.jsx)("div",{className:(0,i.Z)(et().event,"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx)),"data-uid":a.uid,"data-timestamp":a.timestamp,...s,children:(0,n.jsxs)("span",{className:"message",children:["直播间 ",a.uid," 被警告：",a.message]})})}var er=t(8014),ei=t.n(er);function es(e){let{data:a,mode:t,...s}=e;return(0,r.useEffect)(()=>{"dashboard"===t&&ee.N9.show({id:"live-cutoff-".concat(a.uid),title:"".concat((0,Z.Z)(a.timestampNormalized),"：直播 ").concat(a.uid," 被切断！"),message:"".concat(a.message),color:"red"})},[t,a]),(0,n.jsx)("div",{className:(0,i.Z)(ei().event,"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx)),"data-uid":a.uid,"data-timestamp":a.timestamp,...s,children:(0,n.jsxs)("span",{className:"message",children:["直播 ",a.uid," 被切断：",a.message]})})}var ec=t(4654),eo=t.n(ec);function ed(e){let{data:a,mode:t,as:s,...c}=e,[o,d]=(0,r.useState)(!1),l=(0,p.D)(),{colorScheme:m,showGiftHighlightAbove:u,baseFontSize:g}=l,_=a.priceNormalized,v="1";return _&&(_>=30&&_<50?v="1":_>=50&&_<100?v="2":_>=100&&_<500?v="3":_>=500&&_<1e3?v="4":_>=1e3&&_<2e3?v="5":_>=2e3&&(v="6")),(0,n.jsx)("div",{className:(0,i.Z)(eo().event,_>u||"sticky"===s?eo().eventSizeHighlight:eo().eventSizeNormal,eo()["mvpRank".concat(v)],eo()["showAs_".concat(s)],"dark"===m&&[eo().dark,"dark"],"event","event-type--".concat(a.type),"event-show-as--".concat(s),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx),"mvp-rank--".concat(v),a.read&&[eo().read,"read"]),"data-uid":a.uid,"data-timestamp":a.timestampNormalized,"data-mvp-price":a.priceNormalized,"data-mvp-amount":a.mvpAmount,"data-mvp-rank":v,"data-read":a.read,...c,children:(0,n.jsxs)("div",{className:"".concat(eo().content," content"),children:[(0,n.jsxs)("div",{className:"".concat(eo().top," top"),children:[(0,n.jsx)(f.Z,{uid:a.uid,guard:a.guardType}),"sticky"!==s&&(0,n.jsxs)("div",{className:"".concat(eo().username," username"),children:["obs"===t&&(0,n.jsx)(n.Fragment,{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]}),(0,n.jsxs)("div",{className:"".concat(eo().price," price"),children:[(0,n.jsx)("span",{className:"".concat(eo().priceCurrency," price-currency"),children:"CN\xa5"}),(0,n.jsx)("span",{className:"".concat(eo().priceFigure," price-figure"),children:B.Z.format(a.priceNormalized)})]}),(0,n.jsx)("span",{className:"".concat(eo().giftImageWrap," mvp-icon-wrap"),children:(0,n.jsx)("picture",{children:(0,n.jsx)("img",{className:(0,i.Z)(o&&"gift-image-fallback"),src:o?"/gift-fallback.png":a.mvpIcon,alt:"礼物",referrerPolicy:"no-referrer",onError:()=>d(!0),loading:"lazy"})})})]}),(0,n.jsxs)("div",{className:"".concat(eo().priceAlt," price-alt"),children:["CN\xa5",B.Z.format(a.price/1e3)]}),"sticky"!==s&&(0,n.jsxs)("div",{className:"".concat(eo().message," message"),children:[a.action,(0,n.jsx)("b",{children:a.message})]})]})})}var el=t(5779),em=t.n(el),ep=t(1934);function eu(e){let{data:a,mode:t,...r}=e,s=(0,p.D)(),{showMedal:c,baseFontSize:o}=s;return(0,n.jsxs)("div",{className:(0,i.W)(em().event,"event","event-type--".concat(a.type),"origin--".concat(a.origin),"origin-index--".concat(a.originIdx)),"data-uid":a.uid,"data-timestamp":a.timestamp,...r,children:[(0,n.jsxs)("div",{className:"".concat(em().meta," meta"),children:[(0,n.jsx)(f.Z,{uid:a.uid}),(c||"dashboard"===t)&&(0,n.jsx)(h,{data:a.medal}),(0,n.jsxs)("span",{className:"".concat(em().username," username"),children:["obs"===t&&(0,n.jsx)(n.Fragment,{children:a.username}),"dashboard"===t&&(0,n.jsx)(C,{event:a,children:(0,n.jsx)("div",{style:{cursor:"pointer"},children:a.username})})]})]}),(0,n.jsxs)("span",{className:"".concat(em().message," message"),children:["".concat(a.message),(0,n.jsx)(ep.Z,{size:"1em"})]})]})}function eg(e){let{data:a,mode:t="obs",as:r="normal",...i}=e;return"system"===a.type?(0,n.jsx)(o,{data:a,...i}):"interaction"===a.type?(0,n.jsx)(W,{data:a,mode:t,...i}):"message"===a.type?(0,n.jsx)(D,{data:a,mode:t,...i}):"toast"===a.type?(0,n.jsx)(H,{data:a,mode:t,as:r,...i}):"gift"===a.type?(0,n.jsx)(G,{data:a,mode:t,as:r,...i}):"superchat"===a.type?(0,n.jsx)(K,{data:a,mode:t,as:r,...i}):"user-block"===a.type?(0,n.jsx)($,{data:a,mode:t,...i}):"live-warning"===a.type?(0,n.jsx)(en,{data:a,mode:t,...i}):"live-cutoff"===a.type?(0,n.jsx)(es,{data:a,mode:t,...i}):"mvp"===a.type?(0,n.jsx)(ed,{data:a,mode:t,as:r,...i}):"like-click"===a.type?(0,n.jsx)(eu,{data:a,mode:t,...i}):(0,n.jsx)(n.Fragment,{})}},4756:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var n=t(1527),r=t(2803),i=t.n(r),s=t(4232),c=t(5484);function o(){let[e]=(0,s.Z)("bgColor",{defaultValue:""}),[a]=(0,s.Z)("customCss",{defaultValue:""}),t=(0,c.D)(),{colorScheme:r,baseFontSize:o}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{id:"e5ea5ad086f65bb4",dynamic:["light"===r?"\n            --black-h: 225;\n            --black-s: 0%;\n            --link-color-h: 165;\n            --link-color-s: 25%;\n            --link-color-l: 41%;\n            --code-color-l: 51%;\n\n            --demo-bg: #eee;\n            --demo-bg-alt: #fff;\n\n            --interal-text-shadow:\n              -2px -2px #fff,\n              -2px -1px #fff,\n              -2px 0px #fff,\n              -2px 1px #fff,\n              -2px 2px #fff,\n              -1px -2px #fff,\n              -1px -1px #fff,\n              -1px 0px #fff,\n              -1px 1px #fff,\n              -1px 2px #fff,\n              0px -2px #fff,\n              0px -1px #fff,\n              0px 0px #fff,\n              0px 1px #fff,\n              0px 2px #fff,\n              1px -2px #fff,\n              1px -1px #fff,\n              1px 0px #fff,\n              1px 1px #fff,\n              1px 2px #fff,\n              2px -2px #fff,\n              2px -1px #fff,\n              2px 0px #fff,\n              2px 1px #fff,\n              2px 2px #fff;\n          ":"\n            --black-h: 225;\n            --black-s: 3%;\n            --black-l: 100%;\n            --white-l: 11%;\n            --blue-l: 70%;\n            --green-l: 60%;\n            --purple-l: 67%;\n            --amber-l: 72%;\n            --orange-l: 72%;\n            --red-l: 60%;\n\n            --link-color-h: 165;\n            --link-color-s: 25%;\n            --link-color-l: 51%;\n            --code-color-l: 70%;\n\n            --demo-bg: #333;\n            --demo-bg-alt: #222;\n\n            --interal-text-shadow:\n              -2px -2px #000,\n              -2px -1px #000,\n              -2px 0px #000,\n              -2px 1px #000,\n              -2px 2px #000,\n              -1px -2px #000,\n              -1px -1px #000,\n              -1px 0px #000,\n              -1px 1px #000,\n              -1px 2px #000,\n              0px -2px #000,\n              0px -1px #000,\n              0px 0px #000,\n              0px 1px #000,\n              0px 2px #000,\n              1px -2px #000,\n              1px -1px #000,\n              1px 0px #000,\n              1px 1px #000,\n              1px 2px #000,\n              2px -2px #000,\n              2px -1px #000,\n              2px 0px #000,\n              2px 1px #000,\n              2px 2px #000;\n\n          ",o?"--event-font-size: ".concat(o,"px;"):"--event-font-size: 16px;",e?"--demo-bg: ".concat(e,"; --demo-bg-alt: ").concat(e,";"):""],children:":root{".concat("light"===r?"\n            --black-h: 225;\n            --black-s: 0%;\n            --link-color-h: 165;\n            --link-color-s: 25%;\n            --link-color-l: 41%;\n            --code-color-l: 51%;\n\n            --demo-bg: #eee;\n            --demo-bg-alt: #fff;\n\n            --interal-text-shadow:\n              -2px -2px #fff,\n              -2px -1px #fff,\n              -2px 0px #fff,\n              -2px 1px #fff,\n              -2px 2px #fff,\n              -1px -2px #fff,\n              -1px -1px #fff,\n              -1px 0px #fff,\n              -1px 1px #fff,\n              -1px 2px #fff,\n              0px -2px #fff,\n              0px -1px #fff,\n              0px 0px #fff,\n              0px 1px #fff,\n              0px 2px #fff,\n              1px -2px #fff,\n              1px -1px #fff,\n              1px 0px #fff,\n              1px 1px #fff,\n              1px 2px #fff,\n              2px -2px #fff,\n              2px -1px #fff,\n              2px 0px #fff,\n              2px 1px #fff,\n              2px 2px #fff;\n          ":"\n            --black-h: 225;\n            --black-s: 3%;\n            --black-l: 100%;\n            --white-l: 11%;\n            --blue-l: 70%;\n            --green-l: 60%;\n            --purple-l: 67%;\n            --amber-l: 72%;\n            --orange-l: 72%;\n            --red-l: 60%;\n\n            --link-color-h: 165;\n            --link-color-s: 25%;\n            --link-color-l: 51%;\n            --code-color-l: 70%;\n\n            --demo-bg: #333;\n            --demo-bg-alt: #222;\n\n            --interal-text-shadow:\n              -2px -2px #000,\n              -2px -1px #000,\n              -2px 0px #000,\n              -2px 1px #000,\n              -2px 2px #000,\n              -1px -2px #000,\n              -1px -1px #000,\n              -1px 0px #000,\n              -1px 1px #000,\n              -1px 2px #000,\n              0px -2px #000,\n              0px -1px #000,\n              0px 0px #000,\n              0px 1px #000,\n              0px 2px #000,\n              1px -2px #000,\n              1px -1px #000,\n              1px 0px #000,\n              1px 1px #000,\n              1px 2px #000,\n              2px -2px #000,\n              2px -1px #000,\n              2px 0px #000,\n              2px 1px #000,\n              2px 2px #000;\n\n          ","\n\n          --event-font-family: var(--fontstack-sans-serif);").concat(o?"--event-font-size: ".concat(o,"px;"):"--event-font-size: 16px;","\n          --1px: calc(var(--event-font-size) * 0.0625);--event-line-height:calc(var(--event-font-size) * 1.5);").concat(e?"--demo-bg: ".concat(e,"; --demo-bg-alt: ").concat(e,";"):"","\n        }")}),(0,n.jsx)(i(),{id:"26aa3bdbec4c3d91",dynamic:[a||""],children:"".concat(a||"","\n      ")})]})}},4739:function(e,a,t){"use strict";var n,r;t.d(a,{V:function(){return n}}),(r=n||(n={})).Workers="https://workers.meta48.live",r.EventFetcher="https://event-fetcher.laplace.live"},4679:function(e,a,t){"use strict";t.d(a,{Z:function(){return p}});var n=t(1812),r=t(6382);function i(e){if(e>0&&e<1)return 4;if(e>=1&&e<5)return 6;if(e>=5&&e<10)return 10;if(e>=10&&e<15)return 20;if(e>=15&&e<30)return 30;if(e>=30&&e<50)return 60;if(e>=50&&e<100)return 120;else if(e>=100&&e<500)return 300;else if(e>=500&&e<1e3)return 1800;else if(e>=1e3&&e<2e3)return 3600;else if(e>=2e3&&e<5e3)return 7200;else if(e>=5e3&&e<1e4)return 10800;else if(e>=1e4&&e<2e4)return 14400;else if(e>=2e4)return 18e3;else return 30}var s=t(5872).Buffer;function c(e){return"string"==typeof e?e.replace("http:","https:"):""}var o=t(2970),d=t(7900),l=t(4739),m=t(2088);function p(e,a){let t=o.Z.getState().addQueue,p=[],{persistent:u=!1}=a||{};return e.map(async(e,a)=>{var o,g,_;let f="".concat(l.V.Workers,"/api/bilibili/buvid"),v="".concat(l.V.Workers,"/api/bilibili/room-info/").concat(e),x="".concat(l.V.Workers,"/api/bilibili/room-conn-info/").concat(e),h=await (0,m.u)(f),y=await (0,m.u)(v),k=await (0,m.u)(x),j=new n.KeepLiveWS(e,{authBody:{uid:(null==y?void 0:null===(g=y.data)||void 0===g?void 0:null===(o=g.room_info)||void 0===o?void 0:o.uid)||0,roomid:e,protover:3,buvid:(null==h?void 0:h.token)||"",platform:"web",type:2,key:(null==k?void 0:null===(_=k.data)||void 0===_?void 0:_.token)||""}});j.on("open",()=>console.log("[".concat(e,"#").concat(a,"] WebSocket connection established"))),j.on("live",()=>{j.on("heartbeat",t=>console.log("[".concat(e,"#").concat(a,"] 当前人气"),t));let n=Date.now(),r=function(e,a,t){let{timestamp:n}=e,r={type:"system",uid:0,name:"系统消息",message:"弹幕服务器已连接：".concat(a),origin:a,originIdx:t,id:"".concat(n,":").concat(a,":0"),timestamp:n,timestampNormalized:n,read:!1};return r}({timestamp:n},e,a);t(r)}),j.on("DANMU_MSG",n=>{let i=function(e,a,t,n){var i,o;let{dm_v2:d,info:[[,,,l,m,,,,,p,,,,u,,{extra:g={},mode:_,show_player_type:f},{activity_identity:v,activity_source:x,not_show:h}],y,[k,j,b,N,w,R,I,T],[L=0,Z="",z,C,,,,S,F,D,A,E,W],[B,,M,,P],,,H,,{ts:O,ct:V},,,,,,,[G=0]]}=e,U=JSON.parse(g),q=null==n?void 0:null===(o=n.data)||void 0===o?void 0:null===(i=o.room_info)||void 0===i?void 0:i.uid,J=k===q?100:b,Q={};if(0!==Object.keys((null==U?void 0:U.emots)||{}).length)for(let e in U.emots)Q[e]={url:c(U.emots[e].url),width:U.emots[e].width,height:U.emots[e].height};let K={type:"message",id:"".concat(m,":").concat(a,":").concat(k),origin:a,originIdx:t,uid:k,username:j,avatar:"",nameColor:T,message:y,userType:J,userLvl:B,userLvlBorder:M,currentRank:P,phoneVerified:I,guardType:H,sendType:p,medal:{level:L,name:Z,room:C,colorBorder:S,colorStart:F,colorEnd:D,guardType:A,lightened:E},emote:(null==u?void 0:u.url)&&c(u.url),bmotes:Q,wealthMedalLevel:G,timestamp:m,timestampNormalized:m,read:!1};if(d){let e=s.from(d,"base64"),a=(0,r.parse)('syntax = "proto3";\nmessage UserInfo {\n  string face = 4;\n}\n\nmessage DanmuV2 {\n  UserInfo user = 20;\n}').root,t=a.lookupType("DanmuV2"),n=t.decode(e);K.avatar=c(n.user.face)}return K}(n,e,a,y||{});t(i)}),j.on("INTERACT_WORD",n=>{let r=function(e,a,t){let{data:{uid:n,uname:r,msg_type:i,privilege_type:s,roomid:c,trigger_time:o,fans_medal:{guard_level:d,medal_level:l,medal_name:m,anchor_roomid:p,medal_color_border:u,medal_color_start:g,medal_color_end:_,is_lighted:f}}}=e,v={type:"interaction",id:"".concat(o,":").concat(a,":").concat(n),origin:a,originIdx:t,uid:n,username:r,action:i,guardType:s,medal:{level:l,name:m,room:p,colorBorder:u,colorStart:g,colorEnd:_,guardType:d,lightened:f},timestamp:o,timestampNormalized:parseInt((o/1e6).toFixed(0)),read:!1};return v}(n,e,a);t(r)}),j.on("ENTRY_EFFECT",n=>{let r=function(e,a,t){let{data:{uid:n,privilege_type:r,face:i,copy_writing_v2:s,copy_color:o,highlight_color:d,effective_time:l,basemap_url:m,web_dynamic_url_webp:p,trigger_time:u}}=e,g={type:"entry-effect",id:"".concat(u,":").concat(a,":").concat(n,":entry-effect"),origin:a,originIdx:t,uid:n,avatar:c(i),message:s,nameColor:o,duration:l,background:m,backgroundAnimated:p,guardType:r,timestamp:u,timestampNormalized:parseInt((u/1e6).toFixed(0)),read:!1};return g}(n,e,a);t(r)}),j.on("USER_TOAST_MSG",async n=>{let r=function(e,a,t){let{data:{uid:n,username:r,start_time:s,toast_msg:c,price:o,gift_id:d,color:l,guard_level:m,num:p,unit:u,role_name:g,target_guard_count:_}}=e,f={type:"toast",id:"".concat(1e3*s,":").concat(a,":").concat(n),origin:a,originIdx:t,uid:n,username:r,message:c,price:o,priceNormalized:o/1e3,duration:i(o/1e3),color:l,toastType:m,toastAmount:p,toastAmountUnit:u,toastName:g,toastTotalCount:_,toastId:d,timestamp:1e3*s,timestampNormalized:1e3*s,read:!1};return f}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("SEND_GIFT",async n=>{let r=function(e,a,t){let{data:{uid:n,uname:r,face:s,giftName:o,coin_type:d,total_coin:l,action:m,num:p,price:u,discount_price:g,medal_info:_,guard_level:f,giftType:v,giftId:x,biz_source:h,receive_user_info:y,remain:k,tid:j,timestamp:b}}=e,{medal_level:N=0,medal_name:w="",anchor_roomid:R=0,medal_color_border:I=0,medal_color_start:T=0,medal_color_end:L=0,guard_level:Z=0,is_lighted:z=0}=_||{},C="".concat(b).concat(j.slice(-3)),S={type:"gift",id:"".concat(j,":").concat(a,":").concat(n),origin:a,originIdx:t,uid:n,username:r,avatar:c(s),message:o,price:l,priceNormalized:l/1e3,duration:i(l/1e3),coinType:d,guardType:f,giftType:v,giftAction:m,giftAmount:p,giftId:x,giftName:o,giftRemain:k,bizSource:h,receiver:y,timestamp:parseInt(C),timestampNormalized:parseInt(C),medal:{level:N,name:w,room:R,colorBorder:I,colorStart:T,colorEnd:L,guardType:Z,lightened:z},read:!1};return S}(n,e,a);t(r),"gold"===r.coinType&&u&&await d.db.eventItems.put(r)}),j.on("SUPER_CHAT_MESSAGE",async n=>{let r=function(e,a,t){let{data:{uid:n,message:r,message_font_color:i,message_trans:s,price:o,rate:d,time:l,token:m,trans_mark:p,ts:u,user_info:{uname:g,face:_,face_frame:f,guard_level:v},gift:{gift_id:x,gift_name:h,num:y},id:k,is_ranked:j,is_send_audit:b,background_bottom_color:N,background_color:w,background_color_end:R,background_color_start:I,background_price_color:T,medal_info:L}}=e,{medal_level:Z=0,medal_name:z="",anchor_roomid:C=0,medal_color_border:S=0,medal_color_start:F=0,medal_color_end:D=0,guard_level:A=0,is_lighted:E=0}=L||{},W={type:"superchat",id:"".concat(1e3*u,":").concat(a,":").concat(n),origin:a,originIdx:t,uid:n,username:g,avatar:c(_),avatarFrame:f,message:r,messageColor:i,messageTrans:s,transMark:p,isAudited:b,price:o,priceNormalized:o,token:m,rate:d,duration:l,timestamp:1e3*u,timestampNormalized:1e3*u,guardType:v,scId:k,scName:h,scAmount:y,scBgBottomColor:N,scBgColor:w,scBgColorEnd:R,scBgColorStart:I,scBgPriceColor:T,medal:{level:Z,name:z,room:C,colorBorder:S,colorStart:F,colorEnd:D,guardType:A,lightened:E},read:!1,deleted:!1};return W}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("SUPER_CHAT_MESSAGE_DELETE",async n=>{let r=function(e,a,t){let n=Date.now(),{data:{ids:r}}=e,i={type:"superchat-delete",id:"".concat(n,":").concat(a,":0"),origin:a,originIdx:t,uid:0,username:"",scIds:r,timestamp:n,timestampNormalized:n,read:!1};return i}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("ROOM_BLOCK_MSG",async n=>{let r=function(e,a,t){let n=Date.now(),{data:{uid:r,uname:i,operator:s}}=e,c={type:"user-block",id:"".concat(n,":").concat(a,":").concat(r),origin:a,originIdx:t,uid:r,username:i,operator:s,timestamp:n,timestampNormalized:n,read:!1};return c}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("WARNING",async n=>{let r=function(e,a,t){let n=Date.now(),{msg:r}=e,i={type:"live-warning",id:"".concat(n,":").concat(a,":").concat(a),origin:a,originIdx:t,uid:a,username:"",message:r,timestamp:n,timestampNormalized:n,read:!1};return i}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("CUT_OFF",async n=>{let r=function(e,a,t){let n=Date.now(),{msg:r}=e,i={type:"live-cutoff",id:"".concat(n,":").concat(a,":").concat(a),origin:a,originIdx:t,uid:a,username:"",message:r,timestamp:n,timestampNormalized:n,read:!1};return i}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("USER_VIRTUAL_MVP",async n=>{let r=function(e,a,t){Date.now();let{data:{action:n,effect_id:r,effect_queue:s,goods_icon:o,goods_id:d,goods_name:l,goods_num:m,goods_price:p,success_toast:u,timestamp:g,uid:_,uname:f,uname_color:v,user_guard_level:x}}=e,h={type:"mvp",id:"".concat(g,":").concat(a,":").concat(a),origin:a,originIdx:t,action:n,uid:_,guardType:x,username:f,message:l,price:p,priceNormalized:p/1e3,mvpAmount:m,mvpIcon:c(o),duration:i(p/1e3),timestamp:1e3*g,timestampNormalized:1e3*g,read:!1};return h}(n,e,a);t(r),u&&await d.db.eventItems.put(r)}),j.on("LIKE_INFO_V3_CLICK",async n=>{let r=function(e,a,t){let n=Date.now(),{data:{like_icon:r,like_text:i,uid:s,uname:c,fans_medal:{guard_level:o,medal_level:d,medal_name:l,anchor_roomid:m,medal_color_border:p,medal_color_start:u,medal_color_end:g,is_lighted:_}}}=e,f={type:"like-click",id:"".concat(n,":").concat(a,":").concat(s),origin:a,originIdx:t,uid:s,username:c,message:i,likeIcon:r,medal:{level:d,name:l,room:m,colorBorder:p,colorStart:u,colorEnd:g,guardType:o,lightened:_},timestamp:n,timestampNormalized:n,read:!1};return f}(n,e,a);t(r)}),p.push(j)}),p}},7900:function(e,a,t){"use strict";t.d(a,{L:function(){return s},db:function(){return i}});var n=t(4635);class r extends n.ZP{async toggleRead(e){let a=await this.eventItems.get(e);a&&(a.read=!a.read,await this.eventItems.put(a))}async updateReadState(e,a){let t=await this.eventItems.get(e);t&&(t.read=a,await this.eventItems.put(t))}async removeOldEvents(e){let a=Date.now()-36e5*e;return this.transaction("rw",this.eventItems,async()=>{await this.eventItems.where("timestampNormalized").below(a).delete()})}deleteRoom(e){return this.transaction("rw",this.eventItems,()=>{this.eventItems.where({origin:e}).delete()})}constructor(){super("ChatDB"),this.version(3).stores({eventItems:"&id, origin, uid, timestampNormalized, read"})}}let i=new r;function s(){return i.transaction("rw",i.eventItems,async()=>{await Promise.all(i.tables.map(e=>e.clear()))})}},2088:function(e,a,t){"use strict";async function n(e){let a=await fetch(e);if(!a.ok)return console.error("Fetch error! Status: ".concat(a.status)),{};{let e=await a.json();return e}}t.d(a,{u:function(){return n}})},6310:function(e,a,t){"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,{locale:a="zh-CN",localTime:t=!0,removeMinute00:n=!1,defaultTimezone:r="Asia/Shanghai",format:i={year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.timeZone=t?Intl.DateTimeFormat().resolvedOptions().timeZone:r,(null==i?void 0:i.minute)&&n&&(i.minute=0===new Date(e).getMinutes()?void 0:i.minute),new Intl.DateTimeFormat(a,i).format(new Date(e))}t.d(a,{Z:function(){return n}})},996:function(e,a){"use strict";let t=new Intl.NumberFormat("en-US");a.Z=t},3290:function(e,a,t){"use strict";function n(e,a){let{roomIds:t,showSystemMessage:n,showPhoneNotVerified:r,showOnlyCurrentMedal:i,showUserLevelAbove:s,showGiftPriceAbove:c,showGiftFree:o,showEnterEvent:d,showEnterEventCurrentGuardOnly:l,showFollowEvent:m,showDanmaku:p,showGift:u,showSuperChat:g,showToast:_,showAutoDanmaku:f}=a;if("message"===e.type&&(!1===p||"number"==typeof e.sendType&&0!==e.sendType&&!0!==f||!r&&!e.phoneVerified||i&&e.medal.room!==e.origin||e.userLvl<s)||"interaction"===e.type&&(!d&&1===e.action||l&&e.guardType<1||!m&&(2===e.action||3===e.action||4===e.action||5===e.action))||"like-click"===e.type&&!m)return!1;if("gift"===e.type){let a=e.price/1e3;if(!1===u||!o&&"silver"===e.coinType||a<c)return!1}return("superchat"!==e.type||!1!==g)&&("toast"!==e.type&&"mvp"!==e.type||!1!==_)&&"entry-effect"!==e.type&&"superchat-delete"!==e.type&&("system"!==e.type&&"user-block"!==e.type&&"live-warning"!==e.type&&"live-cutoff"!==e.type||!!n)}function r(e,a){let{roomIds:t,showSystemMessage:n,showPhoneNotVerified:r,showOnlyCurrentMedal:i,showUserLevelAbove:s,showGiftFree:c,showEnterEvent:o,showEnterEventCurrentGuardOnly:d,showFollowEvent:l,showAutoDanmaku:m}=a;return("message"!==e.type||("number"!=typeof e.sendType||0===e.sendType||!0===m)&&(!!r||!!e.phoneVerified)&&(!i||e.medal.room===e.origin)&&!(e.userLvl<s))&&("interaction"!==e.type||(!!o||1!==e.action)&&(!d||!(e.guardType<1))&&(!!l||2!==e.action&&3!==e.action&&4!==e.action&&5!==e.action))&&("like-click"!==e.type||!!l)&&("gift"!==e.type||(e.price,!!c||"silver"!==e.coinType))&&"entry-effect"!==e.type&&"superchat-delete"!==e.type&&("system"!==e.type&&"user-block"!==e.type&&"live-warning"!==e.type&&"live-cutoff"!==e.type||!!n)}t.d(a,{Z:function(){return n},o:function(){return r}})},2970:function(e,a,t){"use strict";var n=t(1704);let r=(0,n.Ue)()(e=>({events:[],queue:[],addEvent:a=>e(e=>({events:[...e.events,a]})),addQueue:a=>e(e=>({queue:[...e.queue,a]})),delQueue:a=>e(e=>({queue:e.queue.slice(a)})),emptyQueue:()=>e(()=>({queue:[]})),updateEvent:(a,t)=>e(e=>{let n=e.events.map(e=>e.id===a?{...e,...t}:e);return{events:n}}),searchQuery:"",updateSearchQuery:a=>e(()=>({searchQuery:a})),deletedSuperChatIds:[],updateDeletedSuperChatIds:a=>e(e=>({deletedSuperChatIds:[...e.deletedSuperChatIds,...a]})),markSuperChatAsDeleted:a=>e(e=>{let t=e.events.map(e=>"superchat"===e.type&&e.scId===a?{...e,deleted:!0}:e);return{events:t}}),markEventAsRead:(a,t)=>e(e=>{let n=e.events.map(e=>e.id===a?{...e,read:void 0!==t?t:!e.read}:e);return{events:n}}),remoteEmotes:void 0,updateRemoteEmotes:a=>e(()=>({remoteEmotes:a}))}));a.Z=r},3626:function(e,a,t){"use strict";t.d(a,{Z:function(){return c}});var n=t(7006),r=t.n(n),i=t(4721),s=t.n(i);function c(e){let{locale:a="zh-CN"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r().locale(a),r().extend(s()),r()(e).fromNow()}t(7e3)},3309:function(e,a,t){"use strict";var n=t(959);a.Z=function(){let[e,a]=(0,n.useState)(""),[t,r]=(0,n.useState)(""),[i,s]=(0,n.useState)(""),[c,o]=(0,n.useState)("");return(0,n.useEffect)(()=>{{let e=window.location.origin;a(e);let t=window.location.host;r(t);let n=window.location.hostname;s(n);let i=n.split(".").slice(-2).join(".");o(i)}},[]),{baseUrl:e,host:t,hostname:i,rootDomain:c}}},4632:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var n=t(959),r=t(2088);let i=["localhost","lchat.vupgo.com","laplace-chat-git-feat-custom-emotes-sparanoid.vercel.app"];async function s(e){let a=await (0,r.u)("https://api-work.psplive.com/ChatEmoji/getEmojiInfo?brid=".concat(e));if(a){let e={};if(a&&0===a.status){let t=a.data.emoji.server_base,n=a.data.emoji.map;if(Object.keys(n||{}).length>0)for(let a in n)n.hasOwnProperty(a)&&(e["[".concat(a,"]")]={url:"".concat(t).concat(n[a])})}return e}}var c=t(3309),o=function(e){let[a,t]=(0,n.useState)(),{hostname:r}=(0,c.Z)();return(0,n.useEffect)(()=>{r&&e&&e.length>0&&e.map(async(e,a)=>{if(0===a){let a=i.includes(r)&&await s(e);a&&t(a)}})},[e,r,t]),{remoteEmotes:a}}},9454:function(e){e.exports={bmoteWrap:"BmoteRenderer_bmoteWrap__P7tNT",bmote:"BmoteRenderer_bmote__TsiPX"}},452:function(e){e.exports={wrap:"avatar_wrap__qDei0",avatar:"avatar_avatar__X8yuE",avatarFrame:"avatar_avatarFrame__KoEkL",guardLevel0:"avatar_guardLevel0__zgaJK",guardLevel1:"avatar_guardLevel1__nnRsM",guardLevel2:"avatar_guardLevel2__JtKNQ",guardLevel3:"avatar_guardLevel3__glx_t",isLive:"avatar_isLive__R0z2R",radar:"avatar_radar__MMk5s"}},7953:function(e){e.exports={event:"danmaku_event__PtUOS",meta:"danmaku_meta__42foZ",read:"danmaku_read__l7w3w",guardLevel0:"danmaku_guardLevel0__yoGyt",username:"danmaku_username__CG1Ym",guardLevel1:"danmaku_guardLevel1__XeEht",dark:"danmaku_dark__SGJtJ",guardLevel2:"danmaku_guardLevel2__tAgeL",guardLevel3:"danmaku_guardLevel3__ppna2",userLevel:"danmaku_userLevel__Sz9d0",message:"danmaku_message__wFkJP",emoteWrap:"danmaku_emoteWrap__aHS_O",emote:"danmaku_emote__rdTha",currentRank:"danmaku_currentRank__AVRmC",currentRank1:"danmaku_currentRank1__5t9x1",currentRank2:"danmaku_currentRank2__Pfix8",currentRank3:"danmaku_currentRank3__vXdsW",modBadge:"danmaku_modBadge__ieIJf",streamerBadge:"danmaku_streamerBadge__7llM4"}},6986:function(e){e.exports={event:"gift_event__1iYCf",read:"gift_read__6jY5h",eventSizeNormal:"gift_eventSizeNormal__vrBAO",guardLevel0:"gift_guardLevel0__FuloE",guardLevel1:"gift_guardLevel1__NL7Lw",guardLevel2:"gift_guardLevel2__CnRiO",guardLevel3:"gift_guardLevel3__GvU_z",dark:"gift_dark__guD7x",username:"gift_username___Gs5_",giftRank1:"gift_giftRank1__OOQmU",message:"gift_message__O3Oft",giftRank2:"gift_giftRank2__brNEY",giftRank3:"gift_giftRank3__axwTa",giftRank4:"gift_giftRank4__O2ggJ",giftRank5:"gift_giftRank5__vmLTo",giftRank6:"gift_giftRank6__jf1R2",content:"gift_content__Ig1h8",price:"gift_price__oi9iT",avatarWrap:"gift_avatarWrap__YUWZS",avatar:"gift_avatar__f1IgC",eventSizeHighlight:"gift_eventSizeHighlight__lcsYI",giftDetailsPrice:"gift_giftDetailsPrice__8otNX",top:"gift_top__Crgjy",giftImageWrap:"gift_giftImageWrap__EM28M",showAs_sticky:"gift_showAs_sticky__667_n",priceCurrency:"gift_priceCurrency__qhx_h",priceFigure:"gift_priceFigure__QqXB_",priceAlt:"gift_priceAlt__Q_xlL",giftDetailsSymbol:"gift_giftDetailsSymbol__7o0y8",giftDetailsFigure:"gift_giftDetailsFigure__7YmeJ"}},3298:function(e){e.exports={event:"interaction_event__dApRc",meta:"interaction_meta__GfPRG",message:"interaction_message__TUhRg",guardLevel0:"interaction_guardLevel0__reLBk",username:"interaction_username__dq3Nr",guardLevel1:"interaction_guardLevel1__4bPJc",dark:"interaction_dark__xwo6s",guardLevel2:"interaction_guardLevel2__RU6lp",guardLevel3:"interaction_guardLevel3__xA_b0",action_enter:"interaction_action_enter__2EzB0",action_follow:"interaction_action_follow__VPXZq",action_share:"interaction_action_share__D5PaC","action_follow-special":"interaction_action_follow-special___AvVs","action_follow-mutual":"interaction_action_follow-mutual__a833j"}},5779:function(e){e.exports={event:"like-click_event__3wBjK",meta:"like-click_meta__UdkeJ",message:"like-click_message__aE1Xi",username:"like-click_username__8_Wwo"}},8014:function(e){e.exports={event:"live-cutoff_event__4X9kh"}},4812:function(e){e.exports={event:"live-warning_event__BCjoA"}},4654:function(e){e.exports={event:"mvp_event__NN3Gw",read:"mvp_read__FfFgl",eventSizeHighlight:"mvp_eventSizeHighlight__qL31T",content:"mvp_content__f_hVm",avatarWrap:"mvp_avatarWrap__2ZIj0",avatar:"mvp_avatar__Ebovf",giftDetailsPrice:"mvp_giftDetailsPrice__5RffW",top:"mvp_top__z4T3l",giftImageWrap:"mvp_giftImageWrap__oQuSH",showAs_sticky:"mvp_showAs_sticky__k4YHe",username:"mvp_username__vqEw4",priceAlt:"mvp_priceAlt__v8cRS",message:"mvp_message__P509q",giftDetailsSymbol:"mvp_giftDetailsSymbol__T3mGz",giftDetailsFigure:"mvp_giftDetailsFigure__U88PF",mvpRank1:"mvp_mvpRank1__Wje1_",mvpRank2:"mvp_mvpRank2__q3var",mvpRank3:"mvp_mvpRank3__KF7LH",mvpRank4:"mvp_mvpRank4__2Dc_t",mvpRank5:"mvp_mvpRank5__FQ9sK",mvpRank6:"mvp_mvpRank6__aX_j6",priceCurrency:"mvp_priceCurrency__nth_l",priceFigure:"mvp_priceFigure__pxToy"}},4290:function(e){e.exports={event:"superchat_event__bNWbY",deleted:"superchat_deleted__cgJBM",read:"superchat_read__vHiQO",showAs_sticky:"superchat_showAs_sticky__Qg8WH",top:"superchat_top__5Sezn",superChatRank1:"superchat_superChatRank1__L12WY",superChatRank2:"superchat_superChatRank2__7LcHh",superChatRank3:"superchat_superChatRank3__yHprK",superChatRank4:"superchat_superChatRank4__bz5Fe",superChatRank5:"superchat_superChatRank5__WeHp8",superChatRank6:"superchat_superChatRank6__8tbSl",dark:"superchat_dark__W5sfH",avatarWrap:"superchat_avatarWrap__zYLuv",message:"superchat_message__1o7FP",content:"superchat_content__uTWMj",meta:"superchat_meta__HRJZI",usernameWrap:"superchat_usernameWrap__TVb0E",username:"superchat_username__p0yqu",price:"superchat_price__bS90C",priceCurrency:"superchat_priceCurrency__wD8zb",priceFigure:"superchat_priceFigure__G6y4i",timestampWrap:"superchat_timestampWrap__A4ZQM",deletedBadge:"superchat_deletedBadge__z9ldK",timestamp:"superchat_timestamp__3yggb"}},939:function(e){e.exports={event:"system_event__ds_bO"}},930:function(e){e.exports={event:"toast_event___4iLB",read:"toast_read__JDppM",showAs_sticky:"toast_showAs_sticky__Y3WfF",avatarWrap:"toast_avatarWrap__fLwI6",avatarFrame:"toast_avatarFrame__MVBX0",tier1:"toast_tier1__7vJck",badgeRank1:"toast_badgeRank1__ApKzR",badgeRank2:"toast_badgeRank2__NNiYC",frameRank1:"toast_frameRank1___S1fK",frameRank2:"toast_frameRank2__NaLr2",frameRank3:"toast_frameRank3__07Ju2",tier2:"toast_tier2__wueZa",tier3:"toast_tier3__L3WAM",dark:"toast_dark__HUrhe",content:"toast_content__inGtP",avatar:"toast_avatar__tZalB",username:"toast_username__sccME",message:"toast_message__s7xhX",price:"toast_price__4i92c",priceCurrency:"toast_priceCurrency__cDmDy",priceFigure:"toast_priceFigure__r3GDq"}},7886:function(e){e.exports={event:"userblock_event__JLJqh"}},1902:function(e){e.exports={fansMedal:"medal_fansMedal__UwV7e",fansMedalContent:"medal_fansMedalContent__ceqVB",fansMedalLevel:"medal_fansMedalLevel__HtKHW",fansMedalHasGuard:"medal_fansMedalHasGuard__qF58k",guardBadge:"medal_guardBadge__L5D6P",guardBadge1:"medal_guardBadge1__WP3l2",guardBadge2:"medal_guardBadge2__PTH4t",guardBadge3:"medal_guardBadge3__btgcT"}},8594:function(e){e.exports={wealthMedal:"wealth-medal_wealthMedal__cdcOg",wealthMedalImageFailed:"wealth-medal_wealthMedalImageFailed__4r3IA"}}}]);